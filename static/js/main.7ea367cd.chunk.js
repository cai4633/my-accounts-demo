(this["webpackJsonpmy-accounts"]=this["webpackJsonpmy-accounts"]||[]).push([[0],{313:function(e,n,t){e.exports=t(699)},318:function(e,n,t){},380:function(e,n,t){},691:function(e,n,t){},699:function(e,n,t){"use strict";t.r(n),t.d(n,"IconFont",(function(){return Cn}));var a=t(0),c=t.n(a),r=t(25),o=t.n(r),l=(t(318),t(15)),i=(t(319),t(297)),u=t.n(i),s=t(87),m=t(8),d=t(30),f=t(32),p=t.n(f),g="YYYY-MM-DD",b="YYYY-MM",h=function(e){return void 0!==e.total};function v(e){var n={};return e.forEach((function(e){e.createAt&&(e.createAt in n||(n[e.createAt]=[]),n[e.createAt].push(e))})),Object.entries(n).sort((function(e,n){return e[0]<n[0]?1:e[0]>n[0]?-1:0}))}function x(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n){var t=e.reduce((function(e,n){return"+"===n.category?e+window.parseFloat(n.output):e-window.parseFloat(n.output)}),0);return{title:t>=0?"\u6536\u5165":"\u652f\u51fa",total:Math.abs(t)}}return e.reduce((function(e,n){return"+"===n.category?Object(d.a)(Object(d.a)({},e),{},{income:e.income+=window.parseFloat(n.output)}):Object(d.a)(Object(d.a)({},e),{},{outcome:e.outcome+=window.parseFloat(n.output)})}),{income:0,outcome:0})}function E(e,n){var t=v(e),a=p()(n).format(b),c=p()(a).unix(),r=p()(a).add(1,"month").unix(),o=t.filter((function(e){var n=p()(e[0]).unix();return n>=c&&n<r})),l=o.reduce((function(e,n){var t=x(n[1],!1);return h(t)?e:{income:e.income+t.income,outcome:e.outcome+t.outcome}}),{income:0,outcome:0});return{rank:o,income:l.income,outcome:l.outcome}}function O(e){for(var n=v(e),t=[],a=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],c=0;c<7;c++)t.push([p()().day(c).format(g),0,0]);return n.forEach((function(e){for(var n=0;n<7;n++)if(e[0]===t[n][0]){var a=x(e[1],!1);h(a)||(t[n]=[e[0],a.income,a.outcome]);break}})),t.map((function(e,n){return[a[n],e[1],e[2]]}))}var j="#06c",w="#eee",y="768px",k="#fff",N="#777",C="#aaa",R="#f1f1f1",S="#e5e5e5",z="#ddd",Y="\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;",T=t(40),I=t(371),A=I.Query;I.User;I.init({appId:"Vai02JpY0WFCmxvXsba5plya-9Nh9j0Va",appKey:"QT6uaO0otX1bYKrsFgYrphey",serverURL:"https://vai02jpy.lc-cn-e1-shared.com"});function M(e){return e.map((function(e){return e.id}))}var D=[],B=new A("tags").find().then((function(e){return e.map((function(e){return e.attributes}))})).then((function(e){return D.push.apply(D,Object(T.a)(e)),e}));function _(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("tags")||"[]")),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(t),o=Object(l.a)(r,2),i=o[0],u=o[1],s=Object(a.useState)([]),m=Object(l.a)(s,2),f=m[0],p=m[1],g=Object(a.useState)({income:[],outcome:[]}),b=Object(l.a)(g,2),h=b[0],v=b[1],x=Object(a.useState)([]),E=Object(l.a)(x,2),O=E[0],j=E[1];Object(a.useEffect)((function(){B.then((function(){t.length||c(D.slice())}))}),[]),Object(a.useEffect)((function(){var e,n=(e=M(i),M(D).filter((function(n){return!e.includes(n)})));v(function(e){var n=[],t=[];return e.forEach((function(e){"+"===e.category?n.push(e):t.push(e)})),{income:n,outcome:t}}(i)),localStorage.setItem("tags",JSON.stringify(i)),p(y(n))}),[i]),Object(a.useEffect)((function(){u(t)}),[t]);var w=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return n.findIndex((function(n){return n.id===e}))},y=function(e){return e.map((function(e){return D.filter((function(n){return n.id===e}))[0]}))};return{tags:i,setTags:u,updateTag:function(e,n){var t=i.slice().map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{name:n}):t}));u(t)},findTagId:w,deleteTag:function(e){var n=i.slice(),t=w(e);-1!==t&&(n.splice(t,1),u(n))},addTag:function(e){u([].concat(Object(T.a)(i),Object(T.a)(y(e))))},allTags:D,checktags:O,setChecktags:j,restTags:f,classify:h,findTags:y}}var F=t(9),P=t(20),J=t.n(P);var V=function(e){var n=e.name,t=e.fill,a=e.className;return c.a.createElement("span",{className:J()("svg-wrapper",a),onClick:e.onClick},c.a.createElement("svg",{className:"icon","aria-hidden":"true",style:{fill:t}},c.a.createElement("use",{xlinkHref:"#icon-"+n})))},H=t(29);function W(){var e=Object(m.a)(["\n  background-color: #fff;\n  ul {\n    display: flex;\n    margin-bottom: 0;\n    li {\n      flex: 1;\n      box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n      a {\n        padding: 5px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        color: rgba(0, 0, 0, 0.3);\n        font-size: 12px;\n        svg {\n          width: 2em;\n          height: 2em;\n        }\n        .icon {\n          margin-bottom: 5px;\n        }\n        &.selected {\n          background-color: ",";\n          color: ",";\n          font-weight: 600;\n          svg {\n            fill: ",";\n          }\n        }\n      }\n    }\n  }\n"]);return W=function(){return e},e}var q=F.a.nav(W(),j,k,k);var K=function(){return c.a.createElement(q,null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(H.b,{to:"/home",activeClassName:"selected"},c.a.createElement(V,{name:"home"}),"\u9996\u9875")),c.a.createElement("li",null,c.a.createElement(H.b,{to:"/detail",activeClassName:"selected"},c.a.createElement(V,{name:"details"}),"\u660e\u7ec6")),c.a.createElement("li",null,c.a.createElement(H.b,{to:"/money",activeClassName:"selected"},c.a.createElement(V,{name:"add_money"}),"\u8bb0\u8d26")),c.a.createElement("li",null,c.a.createElement(H.b,{to:"/tags",activeClassName:"selected"},c.a.createElement(V,{name:"tag"}),"\u6807\u7b7e")),c.a.createElement("li",null,c.a.createElement(H.b,{to:"/statistics",activeClassName:"selected"},c.a.createElement(V,{name:"statistics"}),"\u56fe\u8868"))))};function X(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  text-align: center;\n  position: relative;\n  .container {\n    height: 100%;\n    main {\n      min-height: 100%;\n      padding-bottom: 55px;\n      text-align: left;\n      display: flex;\n      flex-direction: column;\n    }\n    .nav-wrapper {\n      position: fixed;\n      z-index: 1000;\n      width: 100%;\n      max-width: ",";\n      bottom: 0px;\n    }\n  }\n"]);return X=function(){return e},e}var U=F.a.div(X(),y);var L=function(e){return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),c.a.createElement(U,{className:"layout"},c.a.createElement("div",{className:"container"},c.a.createElement("main",{className:e.className},e.children),c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement(K,null))))},Q=c.a.createContext({state:{newRecords:[],allRecords:[]},dispatch:function(){}}),$=function(e){var n,t,a=_().findTags,r=e.id;return c.a.createElement("span",{className:"tag"},c.a.createElement(V,{name:null===(n=a([r])[0])||void 0===n?void 0:n.icon}),c.a.createElement("span",{className:"text"},null===(t=a([r])[0])||void 0===t?void 0:t.name))};function G(){var e=Object(m.a)(["\n  position: relative;\n  height: 100%;\n  .category-wrapper {\n    color: ",";\n    text-align: center;\n    background-color: ",';\n    button {\n      font-size: 24px;\n      line-height: 2em;\n    }\n    h1 {\n      font-size: 20px;\n    }\n    .content {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 10px;\n\n      .content-item {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n      }\n      .date {\n        flex: 1.5;\n        position: relative;\n        .month > .big {\n          font-size: 1.4em;\n        }\n        &::after {\n          position: absolute;\n          content: "";\n          right: 0;\n          display: block;\n          width: 2px;\n          height: calc(100% - 16px);\n          background-color: ',";\n        }\n      }\n      .income,\n      .outcome {\n        flex: 2;\n      }\n    }\n    .datePickerWrapper {\n      background: #fff;\n      position: absolute;\n      bottom: 0px;\n      left: 0px;\n      width: 100%;\n      .shade {\n        position: fixed;\n        background-color: rgba(0, 0, 0, 0.1);\n        width: 100%;\n        height: 100vh;\n        top: 0;\n      }\n    }\n  }\n\n  .content-wrapper {\n    .content {\n      margin-top: 1em;\n      &:nth-child(1) {\n        margin-top: 0em;\n      }\n      h2 {\n        color: ",";\n        border-bottom: 1px solid ",";\n        font-size: 12px;\n        line-height: 1.8;\n        padding: 4px 10px;\n        display: flex;\n        justify-content: space-between;\n        .total > .title {\n          margin-right: 6px;\n        }\n      }\n      .detail {\n        padding: 0 18px;\n        li {\n          a {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            font-size: 16px;\n            line-height: 22px;\n            padding: 9px 0px;\n            .tag > .text {\n              margin-left: 10px;\n            }\n            .note {\n              flex: 1;\n              margin: 0 10px;\n              color: ",";\n              font-size: 14px;\n              text-align: left;\n              ","\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return G=function(){return e},e}var Z=F.a.div(G(),k,j,k,N,z,C,Y),ee=Object(a.memo)((function(){var e=Object(a.useContext)(Q),n=e.state.allRecords,t=(e.dispatch,Object(a.useState)(new Date)),r=Object(l.a)(t,2),o=r[0],i=r[1],m=Object(a.useState)(!1),d=Object(l.a)(m,2),f=d[0],g=d[1],b=_(),v=(b.findTagId,b.tags,b.findTags,function(e,n){return E(e,n)}),O=Object(a.useState)(v([],o)),j=Object(l.a)(O,2),w=j[0],y=j[1],k=Object(a.useState)([]),N=Object(l.a)(k,2),C=N[0],R=N[1],S=Object(a.useState)({income:0,outcome:0}),z=Object(l.a)(S,2),Y=z[0],T=z[1];return Object(a.useEffect)((function(){var e=w.rank,n=w.income,t=w.outcome;R(e),T({income:n,outcome:t})}),[w]),Object(a.useEffect)((function(){y(v(n,o))}),[n]),c.a.createElement(Z,null,c.a.createElement(L,{className:"statistics"},c.a.createElement("div",{className:"category-wrapper"},c.a.createElement("h1",null,"\u5929\u5929\u8bb0\u8d26"),c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"date content-item",onClick:function(){return g(!0)}},c.a.createElement("span",{className:"year"},o.getFullYear(),"\u5e74"),c.a.createElement("span",{className:"month"},c.a.createElement("span",{className:"big"},function(e){var n=e.getMonth()+1;return n>9?n.toString():"0"+n}(o)),"\u6708",c.a.createElement(V,{name:"dropdown"}))),c.a.createElement("div",{className:"income content-item"},c.a.createElement("span",{className:"title"},"\u6536\u5165"),c.a.createElement("span",{className:"text"},Y.income)),c.a.createElement("div",{className:"outcome content-item"},c.a.createElement("span",{className:"title"},"\u652f\u51fa"),c.a.createElement("span",{className:"text"},Y.outcome))),f&&c.a.createElement("div",{className:"datePickerWrapper"},c.a.createElement("div",{className:"shade",onClick:function(){g(!1)}}),c.a.createElement(u.a,{mode:"month",value:o,onChange:function(e){var t=v(n,e),a=t.rank,c=t.income,r=t.outcome;y({rank:a,income:c,outcome:r}),i(e)}}))),c.a.createElement("div",{className:"content-wrapper"},C.map((function(e){var n=x(e[1]);return c.a.createElement("div",{className:"content",key:e[0]},c.a.createElement("h2",null,c.a.createElement("span",{className:"date"},function(e){var n,t=p()().format("YYYY-MM-DD"),a=p()().subtract(1,"day").format("YYYY-MM-DD");return(n={},Object(s.a)(n,e,e),Object(s.a)(n,t,"\u4eca\u5929"),Object(s.a)(n,a,"\u6628\u5929"),n)[e]}(e[0])),c.a.createElement("div",{className:"total"},c.a.createElement("span",{className:"title"},h(n)&&n.title),c.a.createElement("span",{className:"number"},h(n)&&n.total))),c.a.createElement("ul",{className:"detail"},e[1].map((function(e,n){return c.a.createElement("li",{key:e.id},c.a.createElement(H.b,{to:"/editRecord/".concat(e.id)},e.selected.map((function(n){return c.a.createElement($,{id:n,key:"".concat(e.id).concat(n)})})),c.a.createElement("span",{className:"note no-wrap"},e.note),c.a.createElement("span",{className:"amount"},e.category,e.output)))}))))})))))})),ne=(t(374),t(301)),te=t.n(ne),ae=t(190),ce=t(191),re=new(function(){function e(){Object(ae.a)(this,e)}return Object(ce.a)(e,[{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,t=localStorage.getItem(e);return t?JSON.parse(t):n}},{key:"set",value:function(e,n){localStorage.setItem(e,n)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),e}()),oe=function(){function e(){Object(ae.a)(this,e)}return Object(ce.a)(e,null,[{key:"get",value:function(){return re.get("__records__",[])}},{key:"set",value:function(e){re.set("__records__",JSON.stringify(e))}}]),e}();function le(){var e=Object(m.a)(["\n  background-color: #fff;\n  & > ol {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n\n    li {\n      font-size: 12px;\n      margin: 10px 15px;\n      border: 1px solid transparent;\n      &.empty {\n        width: 3rem;\n        height: 0;\n        margin: 0 16px;\n        border: none;\n        \n      }\n      a,\n      .item {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        word-break: keep-all;\n        svg.icon {\n          padding: 4px;\n          border-radius: 50%;\n          width: 3rem;\n          height: 3rem;\n          margin-bottom: 4px;\n          background-color: ",";\n          border: 1px solid transparent;\n        }\n      }\n\n      .checked {\n        svg.icon {\n          border: 1px solid red;\n        }\n      }\n      .selected {\n        svg.icon {\n          background-color: ",";\n        }\n      }\n    }\n  }\n"]);return le=function(){return e},e}var ie=F.a.div(le(),R,j),ue=function(e){for(var n=e.tags,t=e.addBtn,a=e.checkTags,r=e.onchange,o=e.parent,l=e.togglePad,i=e.selected,u=function(e){return a?a.includes(e)?"checked":"":i&&i.includes(e)?"selected":""},s=function(e){r?r(e):l&&l([e])},m=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(V,{name:e.icon}),c.a.createElement("span",{className:"name"},e.name))},d=[],f=1;f<=8;f++)d.push(f);return c.a.createElement("div",null,c.a.createElement(ie,{className:"tags-container"},c.a.createElement("ol",null,n&&n.map((function(e){return t?function(e){return c.a.createElement("li",{key:e.id,onClick:function(){s(e.id)}},"money"!==o?c.a.createElement(H.b,{to:"/tags/"+e.id},m(e)):c.a.createElement("div",{className:J()("item",u(e.id))},m(e)))}(e):function(e){return c.a.createElement("li",{key:e.id,onClick:function(){s(e.id)}},c.a.createElement("div",{className:J()("item",u(e.id))},m(e)))}(e)})),t&&c.a.createElement("li",null,c.a.createElement(H.b,{to:"/addTags"},c.a.createElement(V,{name:"add"}),c.a.createElement("span",{className:"name"},"\u6dfb\u52a0"))),d.map((function(e){return c.a.createElement("li",{className:"empty",key:e})})))))};ue.defaultProps={addBtn:!0};var se=ue;var me=t(24);function de(){var e=Object(m.a)(["\n  display: flex;\n  color: ",";\n  background-color: ",";\n  font-size: 16px;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  button {\n    color: ",';\n    max-width: 20%;\n    line-height: 3em;\n    flex: 1;\n    position: relative;\n    text-align: center;\n    margin: 0 10px;\n    &.selected::after {\n      content: "";\n      display: block;\n      position: absolute;\n      background-color: ',";\n      width: 100%;\n      height: 4px;\n      left: 0;\n      bottom: 0px;\n    }\n  }\n  .cancel {\n    position: absolute;\n    right: 20px;\n    font-size: 12px;\n  }\n"]);return de=function(){return e},e}var fe=F.a.section(de(),k,j,k,k),pe={"+":"\u6536\u5165","-":"\u652f\u51fa"},ge=function(e){var n=e.category,t=Object(me.g)();return c.a.createElement(fe,null,["-","+"].map((function(t){return c.a.createElement("button",{key:t,className:n===t?"selected":"",onClick:function(){e.onchange(t)}},pe[t])})),c.a.createElement("span",{className:"cancel extend-click",onClick:function(){t.push("/")}},"\u53d6\u6d88"))},be=t(704);function he(){var e=Object(m.a)(["\n  text-align: left;\n  background-color: #f5f5f5;\n  padding: 0 10px;\n  display: flex;\n  span {\n    padding: 1em 0;\n  }\n  input {\n    padding: 1em 0;\n    margin-left: 16px;\n    color: #333;\n    flex: 1;\n  }\n"]);return he=function(){return e},e}var ve=F.a.section(he()),xe=function(e){var n=e.note,t=e.onchange;return c.a.createElement(ve,null,c.a.createElement("span",null,e.title||"\u5907\u6ce8"),c.a.createElement("input",{type:"text",placeholder:e.placeholder||"\u5728\u8fd9\u91cc\u586b\u5199\u5907\u6ce8",defaultValue:n,onBlur:function(e){t(e.target.value)}}))};function Ee(){var e=Object(m.a)(["\n  background-color: #fff;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 180px;\n  .output {\n    width: 100%;\n    input {\n      pointer-events: none;\n      font-size: 26px;\n      text-align: right;\n      width: 100%;\n      box-sizing: border-box;\n      line-height: 1.5em;\n      padding: 0px 10px;\n      box-shadow: inset 0px -5px 5px -5px rgba(0, 0, 0, 0.25), inset 0px 5px 5px -5px rgba(0, 0, 0, 0.25);\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n    }\n  }\n  .pad {\n    width: 100%;\n    flex-grow: 1;\n    min-height: 100px;\n    display: flex;\n    box-sizing: border-box;\n    .button-wrapper {\n      width: 100%;\n      button {\n        box-sizing: border-box;\n        background-color: #eee;\n        width: 25%;\n        float: left;\n        height: 25%;\n        &.white-1 {\n          background-color: #f2f2f2;\n        }\n        &.white-2 {\n          background-color: #e0e0e0;\n        }\n        &.white-3 {\n          background-color: #d3d3d3;\n        }\n        &.white-4 {\n          background-color: #c1c1c1;\n        }\n        &.white-5 {\n          background-color: #b8b8b8;\n        }\n        &.white-6 {\n          background-color: #a9a9a9;\n        }\n        &.white-7 {\n          background-color: #9a9a9a;\n        }\n        &.white-8 {\n          background-color: #8b8b8b;\n        }\n        &.dot {\n          font-weight: 900;\n        }\n        &:nth-child(12) {\n          height: 50%;\n          float: right;\n        }\n        &:nth-child(13) {\n          width: 50%;\n        }\n      }\n    }\n  }\n"]);return Ee=function(){return e},e}var Oe=F.a.section(Ee());var je=function(e){var n=e.output,t=e.onchange,a=function(e){e.length>=14&&(e=e.slice(0,14)),t(e.length?e:"0")};return c.a.createElement(Oe,null,c.a.createElement("div",{className:"output"},c.a.createElement("input",{value:n,onChange:function(e){a(e.target.value)}})),c.a.createElement("div",{className:"pad"},c.a.createElement("div",{className:"button-wrapper clearfix",onClick:function(t){var c=t.target.textContent;c&&("OK"!==c?function(e){return"0123456789.".split("").concat(["\u5220\u9664","\u6e05\u7a7a"]).includes(e)}(c)&&a(function(e,n){switch(e){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":return"0"===n?e:n+e;case".":return n.includes(".")?n:n+e;case"\u6e05\u7a7a":return"0";case"\u5220\u9664":return"0"===n?"0":n.slice(0,-1);default:return"0"}}(c,n)):e.onOk())}},c.a.createElement("button",{className:"white-1"},"1"),c.a.createElement("button",{className:"white-2"},"2"),c.a.createElement("button",{className:"white-3"},"3"),c.a.createElement("button",{className:"white-4"},"\u5220\u9664"),c.a.createElement("button",{className:"white-2"},"4"),c.a.createElement("button",{className:"white-3"},"5"),c.a.createElement("button",{className:"white-4"},"6"),c.a.createElement("button",{className:"white-5"},"\u6e05\u7a7a"),c.a.createElement("button",{className:"white-3"},"7"),c.a.createElement("button",{className:"white-4"},"8"),c.a.createElement("button",{className:"white-5"},"9"),c.a.createElement("button",{className:"white-7"},"OK"),c.a.createElement("button",{className:"white-5"},"0"),c.a.createElement("button",{className:"dot white-6"},"."))))};function we(){var e=Object(m.a)(["\n  background-color: #e5e5e5;\n  height: 100vh;\n  overflow: auto;\n  main {\n    height: 100%;\n    overflow: auto;\n\n    .category-wrapper {\n      min-height: 40px;\n    }\n    .tags-wrapper {\n      overflow: auto;\n      height: calc(100vh - 40px);\n    }\n  }\n  section.bottom {\n    position: fixed;\n    width: 100%;\n    bottom: 0;\n    max-width: ",";\n  }\n"]);return we=function(){return e},e}var ye=F.a.div(we(),y),ke=function(){Object(a.useContext)(Q).state.allRecords;var e={selected:[],note:"",category:"-",output:"0",id:0},n=Object(a.useState)(e),t=Object(l.a)(n,2),r=t[0],o=t[1],i=Object(a.useState)(!1),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(a.useRef)(null),g=Object(a.useRef)(null),b=Object(a.useRef)(null),h=Object(a.useContext)(Q).dispatch,v=Object(me.g)(),x=function(e){o(Object(d.a)(Object(d.a)({},r),e))},E=_().classify;return Object(a.useEffect)((function(){m(!!r.selected.length)}),[r.selected]),Object(a.useEffect)((function(){if(f.current&&g.current){var e=document.documentElement.clientHeight-f.current.offsetHeight-(b.current?b.current.offsetHeight:0);g.current.style.height="".concat(e,"px")}}),[s]),c.a.createElement(ye,null,c.a.createElement(be.a,{appear:!0,in:!0,classNames:"fade",timeout:200},c.a.createElement("main",null,c.a.createElement("div",{className:"category-wrapper",ref:f},c.a.createElement(ge,{category:r.category,onchange:function(e){return x({category:e})}})),c.a.createElement("div",{className:"tags-wrapper",ref:g},c.a.createElement(se,{tags:E[{"+":"income","-":"outcome"}[r.category]],parent:"money",togglePad:function(e){x({selected:e})},selected:r.selected})))),s&&c.a.createElement("section",{className:"bottom",ref:b},c.a.createElement(xe,{note:r.note,onchange:function(e){return x({note:e})}}),c.a.createElement(je,{output:r.output,onchange:function(e){return x({output:e})},onOk:function(){if(0!==parseFloat(r.output)){var n=Object(d.a)(Object(d.a)({},r),{},{createAt:p()().format("YYYY-MM-DD"),id:1e8*Math.random()|0});oe.set([].concat(Object(T.a)(oe.get()),[n])),function(e){var n=I.Object.extend("Records"),t=e.map((function(e){var t=new n;return Object.keys(e).map((function(n){t.set(n,e[n])})),t}));I.Object.saveAll(t)}([n]),h({type:"addNew",data:n}),o(Object.assign({},e)),v.goBack()}else te.a.info("\u60a8\u8fd8\u672a\u8f93\u5165\u91d1\u989d",2)}})))};function Ne(){var e=Object(m.a)(["\n  background-color: #e5e5e5;\n  height: 100%;\n  main {\n    .tags-wrapper {\n      overflow: auto;\n    }\n  }\n"]);return Ne=function(){return e},e}var Ce=F.a.div(Ne()),Re=function(){var e=_(),n=(e.tags,e.addTag,e.classify),t=Object(a.useState)("-"),r=Object(l.a)(t,2),o=r[0],i=r[1];return c.a.createElement(Ce,null,c.a.createElement(L,null,c.a.createElement("div",{className:"category-wrapper"},c.a.createElement(ge,{category:o,onchange:function(e){i(e)}})),c.a.createElement("div",{className:"tags-wrapper"},c.a.createElement(se,{tags:n[{"+":"income","-":"outcome"}[o]]}," "))))};t(380);function Se(){var e=Object(m.a)(["\n  text-align: center;\n  background-color: ",";\n  color: #fff;\n  h1 {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 16px;\n    font-weight: normal;\n    padding: 0 20px;\n    margin: 0;\n    .title {\n      line-height: 3em;\n    }\n  }\n"]);return Se=function(){return e},e}var ze=F.a.header(Se(),j),Ye=function(e){var n=e.onOk,t=Object(me.g)();return c.a.createElement(ze,null,c.a.createElement("h1",null,c.a.createElement(V,{name:"left",onClick:function(){t.goBack()},className:"extend-click"}),c.a.createElement("span",{className:"title"},e.children),c.a.createElement("span",{className:"btn extend-click",onClick:function(){n()}},"\u5b8c\u6210")))};Ye.defaultProps={onOk:function(){console.log("ok")}};var Te=Ye;function Ie(){var e=Object(m.a)(["\n  background-color: ",";\n  min-height: 100%;\n  h2.title {\n    font-size: 14px;\n    padding: 10px 20px;\n  }\n"]);return Ie=function(){return e},e}var Ae=F.a.div(Ie(),S),Me=function(){var e=_(),n=e.addTag,t=e.checktags,a=e.setChecktags,r=e.restTags,o=Object(me.g)();return c.a.createElement(Ae,null,c.a.createElement(Te,{onOk:function(){n(t),o.goBack()}},"\u6dfb\u52a0\u6807\u7b7e"),c.a.createElement(L,null,r.length?c.a.createElement(se,{tags:r,addBtn:!1,checkTags:t,onchange:function(e){var n=t.slice(),c=n.indexOf(e);-1===c?n.push(e):n.splice(c,1),a(n)}}):c.a.createElement("h2",{className:"title"},"\u6682\u65e0\u53ef\u6dfb\u52a0\u7684\u6807\u7b7e")))};function De(){var e=Object(m.a)(["\n  text-align: center;\n  padding: 44px;\n  span {\n    vertical-align: top;\n    display: inline-block;\n    color: #fff;\n    font-size: 17px;\n    line-height: 22px;\n    padding: 9px 15px;\n    border-radius: 4px;\n    background-color: #767676;\n  }\n"]);return De=function(){return e},e}var Be=F.a.div(De()),_e=function(e){var n=e.title,t=e.backgroundColor;return c.a.createElement(Be,{onClick:e.onClick},c.a.createElement("span",{style:{backgroundColor:t}},n))};function Fe(){var e=Object(m.a)(["\n  font-size: 16px;\n  position: relative;\n  main {\n    margin-top: 8px;\n    & > span.noTag {\n      padding-left: 20px;\n    }\n    section {\n      padding: 6px 18px;\n      background-color: #fff;\n      input {\n        font-size: 16px;\n      }\n    }\n  }\n  .button-wrapper {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 34px;\n    span {\n      white-space: nowrap;\n      background-color: #ff4d4f;\n    }\n  }\n"]);return Fe=function(){return e},e}var Pe=Object(F.a)(L)(Fe()),Je=function(e){var n=Object(me.g)(),t=_(),a=t.tags,r=t.findTagId,o=t.updateTag,l=t.deleteTag,i=Object(me.h)().tagId,u=r(window.parseInt(i)),s={title:"\u7f16\u8f91\u6807\u7b7e",value:"\u5220\u9664\u6807\u7b7e",clickHandle:function(){l(window.parseInt(i))}},m=u>=0?a[u].name:"",d=c.a.createElement(xe,{note:m,onchange:function(e){o(u,e)},title:"\u6807\u7b7e\u540d",placeholder:e.placeholder||"\u5728\u8fd9\u91cc\u586b\u5199\u5907\u6ce8"});return c.a.createElement(Pe,{className:"tag"},c.a.createElement(Te,{onOk:function(){n.goBack()}},"\u7f16\u8f91\u6807\u7b7e"),c.a.createElement("main",null,-1===u?c.a.createElement("span",{className:"noTag"},"\u6807\u7b7e\u4e0d\u5b58\u5728\u6216\u8005\u5df2\u5220\u9664"):d),c.a.createElement("div",{className:"button-wrapper"},c.a.createElement(_e,{title:s.value,onClick:s.clickHandle})))};function Ve(){var e=Object(m.a)(["\n  background-color: ",";\n  height: 100%;\n  .layout {\n    header {\n      color: ",";\n      background-color: ",";\n      text-align: center;\n      font-size: 1.5rem;\n      line-height: 2.5em;\n      border-bottom: 1px solid #ccc;\n    }\n    .date {\n      color: ",";\n      background-color: ",";\n      padding: 1em;\n      p {\n        line-height: 2em;\n        &.text {\n          font-size: 1.5rem;\n          text-align: center;\n        }\n      }\n    }\n    .current {\n      padding: 1.5em 0;\n      flex: 1;\n      overflow: auto;\n      h2 {\n        padding: 0 1em;\n        font-size: 1rem;\n        display: flex;\n        align-items: center;\n        font-weight: 600;\n        svg {\n          width: 1.5rem;\n          height: 1.5rem;\n          margin-right: 6px;\n        }\n      }\n      .content {\n        margin-top: 1em;\n        li {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 16px;\n          line-height: 22px;\n          background-color: #fff;\n          padding: 5px 0px;\n          border-radius: 5px;\n          margin: 5px 0;\n          .tag {\n            margin: 0 1em;\n            .text {\n              margin-left: 10px;\n            }\n          }\n          .note {\n            flex: 1;\n            margin: 0 10px;\n            color: #aaa;\n            font-size: 14px;\n            text-align: left;\n            ","\n          }\n          .amount {\n            margin: 0 1em;\n          }\n        }\n      }\n    }\n  }\n"]);return Ve=function(){return e},e}var He=F.a.div(Ve(),w,k,j,k,j,Y),We=function(e){var n=Object(a.useContext)(Q).state.allRecords,t=p()().format("YYYY\u5e74MM\u6708DD\u65e5"),r=function(e){var n={total:{title:"",total:0},records:[]},t=v(e),a=p()().format(g);return t.forEach((function(e){if(e[0]===a){var t=x(e[1]);h(t)&&(n.total=t,n.records=e[1])}})),n}(n);return c.a.createElement(He,{className:"home"},c.a.createElement(L,{className:"layout"},c.a.createElement("header",null,"\u5929\u5929\u8bb0\u8d26"),c.a.createElement("section",{className:"date"},c.a.createElement("p",null,"\u4eca\u5929\u662f"),c.a.createElement("p",{className:"text"},t)),c.a.createElement("section",{className:"current"},c.a.createElement("h2",null,c.a.createElement(V,{name:"current"}),"\u4eca\u5929"),c.a.createElement("div",{className:"content"},c.a.createElement("ul",{className:"today"},r.records.map((function(e){return c.a.createElement("li",{key:e.id},e.selected.map((function(n){return c.a.createElement($,{id:n,key:"".concat(e.id).concat(n)})})),c.a.createElement("span",{className:"note no-wrap"},e.note),c.a.createElement("span",{className:"amount"},e.category,e.output))})))))))},qe=function(){return c.a.createElement(L,null,c.a.createElement("h1",null,"\u9875\u9762\u4e0d\u5b58\u5728"))},Ke=(t(381),t(304)),Xe=t.n(Ke),Ue=(t(390),t(305)),Le=t.n(Ue);function Qe(){var e=Object(m.a)(["\n  text-align: center;\n  .am-list-item {\n    background-color: ",";\n    .am-list-line {\n      justify-content: center;\n      .am-list-content {\n        flex: 0;\n        min-width: 2em;\n        text-align: center;\n      }\n      .am-list-extra {\n        flex-basis: 10px;\n      }\n    }\n  }\n"]);return Qe=function(){return e},e}var $e=F.a.div(Qe(),j),Ge=[{label:"\u6536\u5165",value:"\u6536\u5165"},{label:"\u652f\u51fa",value:"\u652f\u51fa"}],Ze=function(e){var n=Object(a.useState)("\u652f\u51fa"),t=Object(l.a)(n,2),r=t[0],o=t[1];return c.a.createElement($e,{className:"wrapper"},c.a.createElement(Xe.a,{cols:1,data:Ge,title:"\u9009\u62e9\u56fe\u8868\u79cd\u7c7b",cascade:!0,extra:" ",onChange:function(n){n&&"string"===typeof n[0]&&(o(n[0]),e.onChange(n[0]))}},c.a.createElement(Le.a.Item,{align:"middle",arrow:"down"},r)))},en=(t(393),t(306)),nn=t.n(en),tn=(t(395),t(307)),an=t.n(tn);function cn(){var e=Object(m.a)(["\n  padding: 10px;\n"]);return cn=function(){return e},e}var rn=F.a.div(cn()),on=function(e){return c.a.createElement(rn,null,c.a.createElement(nn.a,{size:"lg",className:"sc-example"},c.a.createElement(an.a,{values:["\u5468","\u6708","\u5e74"],onChange:e.onChange,tintColor:"#222",style:{backgroundColor:j},selectedIndex:e.index})))};function ln(e){return e.reduce((function(e,n){return{income:e.income+n[1],outcome:e.outcome+n[2]}}),{income:0,outcome:0})}var un=t(308),sn=t.n(un);function mn(){var e=Object(m.a)(["\n  height: 100%;\n  .header {\n    background-color: ",";\n    padding-bottom: 15px;\n    .am-list-content {\n      color: ",";\n    }\n  }\n  .content {\n    .title {\n      font-size: 1em;\n      padding: 10px 20px;\n      margin: 0;\n      border-bottom: 1px solid #ccc;\n      margin-bottom: 10px;\n    }\n    p {\n      color: ",";\n      padding: 2px ",";\n      font-size: 12px;\n    }\n    #chart {\n      margin: 0px 5px;\n    }\n  }\n"]);return mn=function(){return e},e}var dn=F.a.div(mn(),j,k,N,"20px"),fn=function(){var e=Object(a.useState)(0),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)("\u5468"),i=Object(l.a)(o,2),u=(i[0],i[1]),s=Object(a.useContext)(Q).state.allRecords,m=Object(a.useState)(),d=Object(l.a)(m,2),f=d[0],j=d[1],w=Object(a.useState)(),y=Object(l.a)(w,2),k=y[0],N=y[1],C=Object(a.useState)(ln(O(s))),R=Object(l.a)(C,2),S=R[0],z=R[1];Object(a.useEffect)((function(){if(j(document.getElementById("chart")),f){var e=sn.a.init(f);N(e),e.setOption({tooltip:{show:!0,trigger:"item"},yAxis:{type:"value"},grid:{left:2,containLabel:!0},xAxis:{type:"category"},dataset:{source:O(s)},series:[{name:"\u652f\u51fa",type:"line",dimensions:["date","income","outcome"],encode:{x:0,y:2}}]})}}),[f,s]);var Y=function(e){null===k||void 0===k||k.setOption({dataset:{source:e}})};return c.a.createElement(dn,{className:"statistics"},c.a.createElement(L,null,c.a.createElement("div",{className:"header"},c.a.createElement(Ze,{onChange:function(e){null===k||void 0===k||k.setOption({series:[{name:e,encode:{x:0,y:{"\u6536\u5165":1,"\u652f\u51fa":2}[e]}}]})}}),c.a.createElement(on,{onChange:function(e){var n=e.nativeEvent.selectedSegmentIndex,t=e.nativeEvent.value;switch(n){case 0:var a=O(s);z(ln(a)),Y(a);break;case 1:var c=function(e){for(var n=v(e),t=[],a=[],c=1;c<=31;c++)a.push(c+""),t.push([p()().date(c).format(g),0,0]);return n.forEach((function(e){for(var n=0;n<31;n++)if(e[0]===t[n][0]){var a=x(e[1],!1);h(a)||(t[n]=[e[0],a.income,a.outcome]);break}})),t.map((function(e,n){return[a[n],e[1],e[2]]}))}(s);z(ln(c)),Y(c);break;case 2:var o=function(e){v(e);for(var n=[],t=[],a=1;a<=12;a++){t.push(a+"");var c=p()().month(a-1).format(b),r=E(e,new Date(Date.parse(c)));n.push([c,r.income,r.outcome])}return n.map((function(e,n){return[t[n],e[1],e[2]]}))}(s);z(ln(o)),Y(o);break;default:var l=O(s);z(ln(l)),Y(l)}r(n),u(t)},index:t})),c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"title"},["\u672c\u5468","\u672c\u6708","\u4eca\u5e74"][t]),c.a.createElement("p",null,"\u603b\u6536\u5165:\uffe5",S.income),c.a.createElement("p",null,"\u603b\u652f\u51fa:\uffe5",S.outcome),c.a.createElement("div",{style:{height:"300px"},id:"chart",className:"chart"}))))},pn=(t(691),function(e,n){return function(e){var n=["output","note"],t=new A("Records");t.equalTo("id",e.id),t.first().then((function(t){n.forEach((function(n){return t.set(n,e[n])})),t.save()}))}(e),n.map((function(n){return n.id===e.id?e:n}))}),gn=function(e,n){return function(e){var n=new A("Records");n.equalTo("id",e.id),n.first().then((function(e){e.destroy()}))}(e),n.filter((function(n){return n.id!==e.id}))},bn={addNew:function(e,n){var t=e.newRecords,a=e.allRecords;return Array.isArray(n.data)?e:{newRecords:[].concat(Object(T.a)(t),[n.data]),allRecords:[].concat(Object(T.a)(a),[n.data])}},updateAll:function(e,n){var t=e.newRecords,a=e.allRecords;return Array.isArray(n.data)?e:{newRecords:t,allRecords:pn(n.data,a)}},addAll:function(e,n){var t=e.newRecords,a=(e.allRecords,n.data);return Array.isArray(a)?{newRecords:Object(T.a)(t),allRecords:Object(T.a)(a)}:e},deleteOne:function(e,n){var t=e.newRecords,a=e.allRecords,c=n.data;return Array.isArray(c)?e:{newRecords:Object(T.a)(t),allRecords:gn(c,a)}}},hn=function(e,n){var t=bn[n.type];return t?t(e,n):Object(d.a)({},e)};function vn(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1];return Object(a.useEffect)((function(){new A("Records").find().then((function(e){return e.map((function(e){return e.attributes}))})).then((function(e){c(e)}))}),[]),{records:t}}t(692);var xn=t(309),En=t.n(xn);function On(){var e=Object(m.a)(["\n  font-size: 16px;\n  position: relative;\n  main {\n    margin-top: 8px;\n    & > span {\n      padding-left: 20px;\n    }\n    .record {\n      ul > li {\n        margin: 0 20px;\n        padding-left: 20px;\n        font-size: 14px;\n        line-height: 4;\n        border-bottom: 1px solid #ccc;\n        label {\n          span {\n            color: ",";\n          }\n          input {\n          }\n        }\n      }\n    }\n  }\n  .button-wrapper {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 34px;\n    span {\n      white-space: nowrap;\n      background-color: #ff4d4f;\n    }\n  }\n"]);return On=function(){return e},e}var jn=Object(F.a)(L)(On(),N),wn=c.a.memo((function(e){var n=Object(me.g)(),t=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(me.h)().recordId,i=Object(a.useState)(!0),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(a.useContext)(Q),p=f.state.allRecords,g=f.dispatch,b=Object(a.useMemo)((function(){return e=window.parseInt(o),p.filter((function(n){return n.id===e}))[0];var e}),[p]),h={title:"\u7f16\u8f91\u8d26\u5355",value:"\u5220\u9664\u8d26\u5355",onclick:function(){En.a.alert("\u8b66\u544a","\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417?",[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(){g({type:"deleteOne",data:b}),m(!1)}}],"ios")},onOk:function(){if(b){var e,a,c=Object(d.a)(Object(d.a)({},b),{},{note:(null===(e=r.current)||void 0===e?void 0:e.value)||b.note,output:(null===(a=t.current)||void 0===a?void 0:a.value)||b.output});g({type:"updateAll",data:c})}n.goBack()}},v="\u7c7b\u578b",x="\u91d1\u989d",E="\u65e5\u671f",O="\u5907\u6ce8",j=c.a.createElement("div",{className:"record"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("label",null,c.a.createElement("span",null,x,"\uff1a"),c.a.createElement("input",{type:"text",defaultValue:null===b||void 0===b?void 0:b.output,ref:t}))),c.a.createElement("li",null,c.a.createElement("label",null,c.a.createElement("span",null,O,"\uff1a"),c.a.createElement("input",{type:"text",defaultValue:null===b||void 0===b?void 0:b.note,ref:r}))),c.a.createElement("li",{className:"no-pointer"},c.a.createElement("label",null,c.a.createElement("span",null,v,"\uff1a"),c.a.createElement("input",{type:"text",defaultValue:{"+":"\u6536\u5165","-":"\u652f\u51fa"}[null===b||void 0===b?void 0:b.category]}))),c.a.createElement("li",{className:"no-pointer"},c.a.createElement("label",null,c.a.createElement("span",null,E,"\uff1a"),c.a.createElement("input",{type:"text",defaultValue:null===b||void 0===b?void 0:b.createAt})))));return c.a.createElement(jn,{className:"tag"},c.a.createElement(Te,{onOk:h.onOk},h.title),c.a.createElement("main",null,b?j:c.a.createElement("span",null,"\u8d26\u5355\u4e0d\u5b58\u5728\u6216\u8005\u5df2\u5220\u9664")),c.a.createElement("div",{className:"button-wrapper"},s&&c.a.createElement(_e,{title:h.value,onClick:function(){h.onclick()}})))})),yn={newRecords:[],allRecords:[]},kn=function(){var e=vn().records,n=Object(a.useReducer)(hn,yn),t=Object(l.a)(n,2),r=t[0],o=t[1],i=Object(a.useMemo)((function(){return{state:r,dispatch:o}}),[r]);return Object(a.useEffect)((function(){o({type:"addAll",data:e})}),[e]),c.a.createElement(Q.Provider,{value:i},c.a.createElement(H.a,null,c.a.createElement(me.d,null,c.a.createElement(me.a,{exact:!0,from:"/",to:"/home"}),c.a.createElement(me.b,{exact:!0,path:"/home",component:We}),c.a.createElement(me.b,{exact:!0,path:"/tags",component:Re}),c.a.createElement(me.b,{exact:!0,path:"/tags/:tagId",component:Je}),c.a.createElement(me.b,{exact:!0,path:"/addTags",component:Me}),c.a.createElement(me.b,{exact:!0,path:"/detail",component:ee}),c.a.createElement(me.b,{exact:!0,path:"/editRecord/:recordId",component:wn}),c.a.createElement(me.b,{exact:!0,path:"/money",component:ke}),c.a.createElement(me.b,{exact:!0,path:"/statistics",component:fn}),c.a.createElement(me.b,{path:"*",component:qe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nn=t(703),Cn=Object(Nn.a)({scriptUrl:"//at.alicdn.com/t/font_2004957_uhq290qv94.js"});o.a.render(c.a.createElement(kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[313,1,2]]]);
//# sourceMappingURL=main.7ea367cd.chunk.js.map